[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Kom i gang med DAPLA",
    "section": "",
    "text": "Denne boken er ment som enkel-√•-bruke manual for √• ta i bruk SSBs nye dataplattform Dapla. Plattformen fors√∏ker √• gj√∏re statistikkprodusenter og forskere s√• selvhjulpne som mulig. M√•lsetningen er at tjenestene som tilbys skal kunne tas i bruk p√• en enkel og intuitiv m√•te. Men uansett hvor lett tilgjengelig tjenester er, og hvor mye arbeid som er lagt √• gj√∏re l√∏sninger brukervennlige, s√• trenger de fleste i SSB en klar og tydelig veiledning for hvordan de skal brukes og i hvilken st√∏rre sammenheng tjenestene inng√•r. Dapla-manualen er ment √• v√¶re en s√•nn st√∏tte i statistikkernes hverdag. Uansett om man lurer p√• hvordan man logger seg inn p√• plattformen, eller om man √∏nsker informasjon om kj√∏remilj√∏et for mer kompliserte maskinl√¶ringsmodeller, s√• skal man finne veiledning i denne manualen. M√•lgruppen er b√•de nybegynneren og den mer erfarne.\n\n\n\n\n\n\nDenne boken er skrevet med Quarto og er publisert p√• https://statisticsnorway.github.io/dapla-manual/. Alle ansatte i SSB kan bidra til boken ved klone dette repoet, gj√∏re endringer i en branch, og sende en pull request til administratorene av repoet (Team Statistikktjenester).\n\n\n\n\n\nDapla-manualen er initiert og skrevet av Team Statistikktjenester i SSB. Bidragsytere er √òyvind Bruer-Skarsb√∏, Miles Winther, Bj√∏rn Andre Skaar og Anders Lunde. Ved behov for oppdateringer og nytt innhold h√•per vi at alle i SSB kan bidra."
  },
  {
    "objectID": "preface.html",
    "href": "preface.html",
    "title": "Forord",
    "section": "",
    "text": "Det er tilrettelagt for en treningsarena i bakkemilj√∏et. Dette milj√∏et er nesten identisk med det som m√∏ter deg p√• Dapla, med unntak av at du her har tilgang til mange av de gamle systemene og mye mindre hestekrefter i maskinene. Ideen er at SSB-ere ofte vil √∏nske √• l√¶re seg de nye verkt√∏yene2 i kjente og kj√¶re omgivelser f√∏rst, og deretter flytte et ferdig skrevet produksjonsl√∏p til Dapla. Del 4 av denne boken beskriver mer utfyllende hvordan dette milj√∏et skiller seg fra Dapla, og hvordan man gj√∏r en del vanlige operasjoner mot de gamle bakkesystemene.\nSiste delen av boken kaller vi Avansert og tar for seg ulike emner som mer avanserte brukere typisk trenger informasjon om. Her finner man blant annet informasjon om hvilke databaser man kan bruke og hvilke form√•l de er egnet for. Her beskrives ogs√• hvordan man kan bruke andre IDE-er enn Jupyterlab hvis man √∏nsker det. Tjenester for schedulerte kj√∏ringer av Notebooks blir ogs√• diskutert.\nForh√•pentligvis senker denne boken terskelen for √• ta i bruk Dapla. Kommentarer og √∏nsker vedr√∏rende boken tas imot med √•pne armer.\nGod forn√∏yelseüòÅ\n\n\n\n\n\nI denne boken omtaler vi den gamle produksjonssonen, ofte kalt prodsonen, som bakke, og det nye skymilj√∏et Google Cloud som sky. Det er ikke helt presist men duger for form√•lene i denne boken.‚Ü©Ô∏é\nDet som omtales som nye verkt√∏y er vil som regel bety R, Python, Git, GitHub og Jupyterlab.‚Ü©Ô∏é"
  },
  {
    "objectID": "introduksjon.html",
    "href": "introduksjon.html",
    "title": "Introduksjon",
    "section": "",
    "text": "M√•let med dette kapitlet er √• gi en grunnleggende innf√∏ring i hva som legges i ordet Dapla. I tillegg gis en forklaring p√• hvorfor disse valgene er tatt."
  },
  {
    "objectID": "hva-er-dapla.html",
    "href": "hva-er-dapla.html",
    "title": "1¬† Hva er Dapla?",
    "section": "",
    "text": "Dapla st√•r for dataplattform, og er en skybasert l√∏sning for statistikkproduksjon og forskning."
  },
  {
    "objectID": "hvorfor-dapla.html",
    "href": "hvorfor-dapla.html",
    "title": "2¬† Hvorfor Dapla?",
    "section": "",
    "text": "Den nye skybaserte dataplattformen (Dapla) skal bli viktig for √• effektivisere arbeids-og produksjonsprosesser, den skal sikre effektiv lagring og gjenfinning av data og metadata, og st√∏tte opp under deling av data p√• tvers av statistikkomr√•der.\n\nKilde: Langtidsplan for SSB (2022-2024)\n\n\n\nM√•let med Dapla er √• tilby tjenester og verkt√∏y som lar statistikkprodusenter og forskere produsere resultater p√• en sikker og effektiv m√•te."
  },
  {
    "objectID": "arkitektur.html",
    "href": "arkitektur.html",
    "title": "3¬† Arkitektur",
    "section": "",
    "text": "Hvilke komponenter er plattformen bygd opp p√•? Forklart p√• lettest mulig m√•te."
  },
  {
    "objectID": "innlogging.html",
    "href": "innlogging.html",
    "title": "4¬† Innlogging",
    "section": "",
    "text": "Innlogging p√• Dapla er veldig enkelt. Dapla er en nettadresse som alle SSB-ere kan g√• inn p√• hvis de er logget p√• SSB sitt nettverk. √Ö v√¶re logget p√• SSB sitt nettverk betyr i denne sammenhengen at man er logget p√• med VPN, enten man er p√• kontoret eller p√• hjemmekontor. For √• gj√∏re det enda enklere har vi laget en fast snarvei til denne nettadressen p√• v√•rt intranett/Byr√•nettet(se Figure¬†4.1).\nMen samtidig som det er lett √• logge seg p√•, s√• er det noen kompliserende ting som fortjener en forklaring. Noe skyldes at vi mangler et klart spr√•k for √• definere bakkemilj√∏et og skymilj√∏et slik at alle skj√∏nner hva man snakker om. I denne boken definerer bakkemilj√∏et som stedet der man har drevet med statistikkproduksjon de siste ti√•rene. Skymilj√∏et er den nye dataplattformen Dapla p√• Google Cloud.\nDet som gj√∏r ting litt komplisert er at vi har 2 Jupyter-milj√∏er p√• b√•de bakke og sky. √Örsaken er at vi har ett test- og ett prod-omr√•de for hver, og det blir i alt 4 Jupyter-milj√∏er. Figure¬†4.2 viser dette.\nHver av disse milj√∏ene har sin egen nettadresse og sitt eget bruksomr√•de."
  },
  {
    "objectID": "innlogging.html#dapla",
    "href": "innlogging.html#dapla",
    "title": "4¬† Innlogging",
    "section": "4.1 Dapla",
    "text": "4.1 Dapla\nI de fleste tilfeller vil en statistikker eller forsker √∏nske √• logge seg inn i prod-milj√∏et. Det er her man skal kj√∏re koden sin i et produksjonsl√∏p som skal publiseres eller utvikles. I noen tilfeller hvor man ber om √• f√• tilgjengliggjort en ny tjeneste s√• vil denne f√∏rst rulles ut i testomr√•det som vi kaller staging-omr√•det. √Örsaken er at vi √∏nsker √• beskytte prod-milj√∏et fra software som potensielt √∏delegger for eksisterende funksjonalitet. Derfor ruller vi ut nye ting i staging f√∏rst. Av den grunn vil de fleste oppleve √• bli bedt om √• logge seg inn der for testing en eller annen gang. Under forklarer vi hvordan man g√•r frem for √• logge seg p√• de to ulike milj√∏ene p√• Dapla.\n\n4.1.1 Prod\nFor √• logge seg inn inn i prod-milj√∏et p√• Dapla kan man gj√∏re f√∏lgende:\n\nG√• inn p√• lenken https://jupyter.dapla.ssb.no/ i en Chrome-nettleser eller klikk p√• lenken p√• Byr√•nettet som vist i Figure¬†4.1.\nAlle i SSB har en Google Cloud-konto som m√• brukes n√•r man logger seg p√• Dapla. Brukernavnet i Google er det samme som din korte epost-adresse (f.eks. cth@ssb.no). Hvis du ikke allerede er logget inn i Google vil du f√• sp√∏rsm√•l om √• velge hvilken Google-konto som skal brukes (Figure¬†4.3). Logg inn med din Google-konto (ssb.no) og ditt AD-passord.\n\n\n\n\nFigure¬†4.3: Velg en Google-konto\n\n\n\nDeretter blir man spurt om man godtar at ssb.no (alts√• Dapla) kan bruke din Google Cloud-konto (Figure¬†4.4). Trykk Allow.\n\n\n\n\nFigure¬†4.4: Tillat at ssb.no f√•r bruke din Google Cloud-konto\n\n\n\nDeretter lander man p√• en side som lar deg avgj√∏re hvor mye maskinkraft som skal holdes av til deg (Figure¬†4.5). Det √∏verste alternativet er valgt som standard, og er tilstrekkelig for de fleste.\n\n\n\n\nFigure¬†4.5: Velg hvor mye maskinkraft du trenger\n\n\n\nVent til maskinen din starter opp (Figure¬†4.6). Oppstartstiden kan variere.\n\n\n\n\nFigure¬†4.6: Starter opp Jupyter\n\n\nEtter dette er man logget inn i et Jupyter-milj√∏ som kj√∏rer p√• en minimal Ubuntu-maskin. Hvis man er del av et Dapla-team f√•r man ogs√• tilgang til alt teamet har tilgang til.\n\n\n4.1.2 Staging\nInnlogging til staging-milj√∏et er identisk med innloggingen til prod-milj√∏et, med ett viktig unntak: nettadressen er n√• https://jupyter.dapla-staging.ssb.no/.\nLitt mer om hva som er tilgjenglig her kommer."
  },
  {
    "objectID": "innlogging.html#bakkemilj√∏et",
    "href": "innlogging.html#bakkemilj√∏et",
    "title": "4¬† Innlogging",
    "section": "4.2 Bakkemilj√∏et",
    "text": "4.2 Bakkemilj√∏et\nJupyter-milj√∏et p√• bakken bruker samme base-image1 for √• installere Jupyterlab, og er derfor identisk p√• mange m√•ter. Men innloggingen er ganske forskjellig.\n\n4.2.1 Prod\nDu logger deg inn p√• prod i bakkemilj√∏et p√• f√∏lgende m√•te:\n\nLogg deg inn p√• Citrix-Windows i bakkemilj√∏et. Det kan gj√∏res ved √• bruke lenken Citrix p√• Byr√•nettet, som ogs√• vises i Figure¬†4.1.\n√Öpne Chrome-nettleseren\nG√• inn p√• denne nettadressen: https://sl-jupyter-p.ssb.no/\nSkriv inn ditt brukernavn og passord som du bruker n√•r du logger deg p√• maskinen din hver morgen.\n\n\n\n4.2.2 Staging\nInnlogging til staging-milj√∏et er identisk med innloggingen til prod-milj√∏et, med ett viktig unntak: nettadressen er n√• https://sl-jupyter-t.ssb.no/."
  },
  {
    "objectID": "jupyterlab.html",
    "href": "jupyterlab.html",
    "title": "5¬† Jupyterlab",
    "section": "",
    "text": "Mer kommer."
  },
  {
    "objectID": "jupyterlab.html#terminalen",
    "href": "jupyterlab.html#terminalen",
    "title": "5¬† Jupyterlab",
    "section": "5.2 Terminalen",
    "text": "5.2 Terminalen\nM√• nevne operativsystemet og at noe programvare ligger installert her (git, jwsacruncher, quarto, ++)"
  },
  {
    "objectID": "jupyterlab.html#pakkeinstallasjoner",
    "href": "jupyterlab.html#pakkeinstallasjoner",
    "title": "5¬† Jupyterlab",
    "section": "5.3 Pakkeinstallasjoner",
    "text": "5.3 Pakkeinstallasjoner\nNoe er i base-image, noe b√∏r gj√∏res i virtuelle mil√∏er. Hvordan liste ut pakker som er pre-installert?"
  },
  {
    "objectID": "jupyterlab.html#extensions",
    "href": "jupyterlab.html#extensions",
    "title": "5¬† Jupyterlab",
    "section": "5.4 Extensions",
    "text": "5.4 Extensions\nJupyterlab er en samling extension. Kan bare installeres av admin. Sikkerhet. Hvilke extension har vi tilgjengeliggjort?"
  },
  {
    "objectID": "jupyterlab.html#tips-triks",
    "href": "jupyterlab.html#tips-triks",
    "title": "5¬† Jupyterlab",
    "section": "5.5 Tips & triks",
    "text": "5.5 Tips & triks\nSane defaults for Jupyterlab."
  },
  {
    "objectID": "dapla-team.html",
    "href": "dapla-team.html",
    "title": "Opprette Dapla-team",
    "section": "",
    "text": "Dette kapitlet beskriver hva et Dapla-team er og hvordan man g√•r frem for √• opprette et nytt team p√• Dapla."
  },
  {
    "objectID": "hva-er-dapla-team.html",
    "href": "hva-er-dapla-team.html",
    "title": "7¬† Hva er Dapla-team?",
    "section": "",
    "text": "Hvert Dapla-team f√•r opprettet et prosjektomr√•de i Google Cloud Platform (GCP), som er SSBs leverand√∏r av skytjenester."
  },
  {
    "objectID": "opprette-dapla-team.html",
    "href": "opprette-dapla-team.html",
    "title": "8¬† Opprette Dapla-team",
    "section": "",
    "text": "G√• til Dapla Start for starte bestilling av et nytt Dapla-team.\n\n\n\nN√•r teamet er opprettet f√•r alle medlemmene tilgang til sitt eget prosjekt i Google Cloud Platform (GCP), som er SSBs leverand√∏r av skytjenester. Videre f√•r hvert prosjekt et sett med tjenester og tilganger som knyttes til teamet. Det opprettes ogs√• datalagringsomr√•der (kalt ‚Äúb√∏tter‚Äù) som bare kan aksesseres av brukere som er med i teamets tilgangsgrupper."
  },
  {
    "objectID": "b√∏tter.html",
    "href": "b√∏tter.html",
    "title": "9¬† B√∏tter",
    "section": "",
    "text": "Hvert statistikkteam har sitt eget datalager som heter Google Cloud Storage (GCS). Disse er delt inn i flere datalagringsomr√•der som kalles b√∏tter. Dette kan sees p√• som et filsystem som kan organiseres med flere undermapper og filer. Navnet p√• b√∏ttene m√• v√¶re unikt p√• tvers av alle Dapla-team. Derfor blir disse opprettet etter en navnekonvensjon basert p√• kj√∏remilj√∏, teamnavn og hvilke data b√∏tta skal inneholde."
  },
  {
    "objectID": "b√∏tter.html#b√∏ttenavn-i-produksjonsmilj√∏et",
    "href": "b√∏tter.html#b√∏ttenavn-i-produksjonsmilj√∏et",
    "title": "9¬† B√∏tter",
    "section": "9.1 B√∏ttenavn i Produksjonsmilj√∏et",
    "text": "9.1 B√∏ttenavn i Produksjonsmilj√∏et\n\nssb-prod-teamnavn-data-kilde: Inneholder pseudonymiserte r√•data fra datakildene\nssb-prod-teamnavn-data-produkt: Inneholder data knyttet til statistikkproduktet, med f√∏lgende underkataloger:\n\ninndata\nklargjorte-data\nstatistikk\nutdata\n\nssb-prod-teamnavn-data-delt: Inneholder data knyttet til statistikkproduktet som kan deles med andre statistikkteam. Disse vil ha f√∏lgende underkataloger:\n\ninndata\nklargjorte-data\nstatistikk\nutdata\n\n\n\n\n\n\n\n\nUnderkatalogene inndata, klargjorte-data, statistikk og utdata gjenspeiler SSBs datatilstander. Se Datatilstander i SSB for mer informasjon."
  },
  {
    "objectID": "b√∏tter.html#andre-milj√∏er",
    "href": "b√∏tter.html#andre-milj√∏er",
    "title": "9¬† B√∏tter",
    "section": "9.2 Andre milj√∏er",
    "text": "9.2 Andre milj√∏er\nP√• samme m√•te som i produksjonsmilj√∏et finnes det b√∏tter for utviklings- og testform√•l:\n\nssb-staging-teamnavn-data-kilde\nssb-staging-teamnavn-data-produkt\nssb-staging-teamnavn-data-delt"
  },
  {
    "objectID": "b√∏tter.html#fellesb√∏tter",
    "href": "b√∏tter.html#fellesb√∏tter",
    "title": "9¬† B√∏tter",
    "section": "9.3 Fellesb√∏tter",
    "text": "9.3 Fellesb√∏tter\nI tillegg til disse finnes det noen b√∏tter med data som kan deles med alle i SSB og og som kan brukes til kurs og oppl√¶ring (bl.a. denne manualen). Disse b√∏ttene er:\n\nssb-prod-dapla-data-delt\nssb-staging-dapla-data-delt"
  },
  {
    "objectID": "gcc.html",
    "href": "gcc.html",
    "title": "10¬† Google Cloud Console",
    "section": "",
    "text": "Google Cloud Console er et web-basert grensesnitt for √• administrere ressurser og tjenester p√• Google Cloud. For √• bruke denne m√• man ha en Google-konto. Alle i SSB har en konto knyttet opp mot Google.\n\n\n\n\n\n\nG√• til Google Cloud Console og logg p√• med din SSB-bruker."
  },
  {
    "objectID": "ssb-project.html",
    "href": "ssb-project.html",
    "title": "15¬† SSB-project",
    "section": "",
    "text": "Produksjonsl√∏p p√• Dapla kan med fordel f√∏lge noen helt klare retningslinjer for arbeidsprosesser og kode. Dette b√∏r blant annet inkludere:\nTeam Statistikktjenester har laget en CLI2 som skal gj√∏re dette lett √• implemententere dette i kode. Den heter ssb-project og hjelper deg implementere det som til enhver tid er beste-praksis for koding.\nUnder vises det hvordan man bruker ssb-project til sette opp et prosjekt. Men programmet forutsettet at du har en GitHub-bruker som er knyttet opp mot statisticsnorway. De f√∏rste underkapitlene er derfor en beskrivelse av dette."
  },
  {
    "objectID": "ssb-project.html#opprett-github-bruker",
    "href": "ssb-project.html#opprett-github-bruker",
    "title": "15¬† SSB-project",
    "section": "15.1 Opprett GitHub-bruker",
    "text": "15.1 Opprett GitHub-bruker\nDette kapitlet er bare relevant hvis man ikke har en GitHub-brukerkonto fra f√∏r. For √• bruke ssb-project-programmet til √• generere et remote repo p√• GitHub m√• du ha en konto. Derfor starter vi med √• gj√∏re dette. Det er en engangsjobb og du trenger aldri gj√∏re det igjen.\n\n\n\n\n\n\nSSB har valgt √• ikke sette opp SSB-brukerne til de ansatte som GitHub-brukere. En viktig √•rsak er at er en GitHub-konto ofte regnes som en del av den ansattes CV. For de som aldri har brukt GitHub f√∏r kan det virke fremmed, men det er nok en fordel p√• sikt n√•r alle blir godt kjent med denne arbeidsformen.\n\n\n\nSlik gj√∏r du det:\n\nG√• til https://github.com/\nTrykk Sign up √∏verst i h√∏yre hj√∏rne\nSvar p√• sp√∏rsm√•lene du blir stilt.\n\nHusk at du lager en personlig konto uavhengig av SSB. Brukernavnet kan v√¶re noe annet enn brukernavnet ditt i SSB. I neste steg skal vi knytte denne kontoen til din SSB-bruker."
  },
  {
    "objectID": "ssb-project.html#sec-tofaktor",
    "href": "ssb-project.html#sec-tofaktor",
    "title": "15¬† SSB-project",
    "section": "15.2 To-faktor autentifisering",
    "text": "15.2 To-faktor autentifisering\nHvis du har fullf√∏rt forrige steg s√• har du n√• en GitHub-konto. Hvis du st√•r p√• din profil-side s√• ser den slik ut:\n\nDet neste vi m√• gj√∏re er √• aktivere 2-faktor autentifisering, siden det er dette sin benyttes i SSB. Hvis du st√•r p√• siden i bildet over, s√• gj√∏r du f√∏lgende for √• aktivere 2-faktor autentifisering mot GitHub:\n\n\n\nTrykk p√• den lille pilen √∏verst til h√∏yre og velg Settings(se bilde til h√∏yre).\nDeretter velger du Password and authentification i menyen til venstre.\n\n\n\n\n\n\n\nUnder Two-factor authentication trykker du p√• Add. Da f√•r du opp f√∏lgende bilde:\n\n\n\n\n\nStrekkoden over skal skannes i din Microsoft Authenticator-app p√• mobilen. √Öpne appen, trykk p√• Bekreftede ID-er, og til slutt trykk p√• Skann QR-kode. Deretter skanner du QR-koden fra punkt 3.\nN√•r koden er skannet har du f√•tt opp f√∏lgende bilde p√• appens hovedside (se bilde til h√∏yre). Skriv inn den 6-siffer koden p√• GitHub-siden med QR-koden.\nTil slutt lagrer du Recovery-codes et trygt sted p√• ditt hjemmeomr√•det.\n\n\n\n\n\n\nN√• har vi aktivert 2-faktor autentifisering for GitHub og er klare til √• knytte v√•r personlige konto til v√•r SSB-bruker p√• statisticsnorway."
  },
  {
    "objectID": "ssb-project.html#koble-deg-til-ssb",
    "href": "ssb-project.html#koble-deg-til-ssb",
    "title": "15¬† SSB-project",
    "section": "15.3 Koble deg til SSB",
    "text": "15.3 Koble deg til SSB\nI forrige steg aktiverte vi 2-faktor autentifisering for GitHub. Det neste vi m√• gj√∏re er √• bruke denne autentifiseringen til koble oss til SSB sin bedriftskonto statisticsnorway. Det er dette som gj√∏r at vi kan jobbe med SSB-kode som ligger lagret p√• GitHub.\n\nG√• til profilsiden din og velg Settings slik du gjorde i punkt 1 i forrige delkapitel.\nTrykk deretter p√• Organizations i menyen til venstre.\nTrykk deretter p√• New organization.\nS√∏k etter statisticsnorway."
  },
  {
    "objectID": "ssb-project.html#personal-access-token-pat",
    "href": "ssb-project.html#personal-access-token-pat",
    "title": "15¬† SSB-project",
    "section": "15.4 Personal Access Token (PAT)",
    "text": "15.4 Personal Access Token (PAT)\nN√•r vi skal jobbe med SSB-kode som ligger lagret hos statistcsnorway p√• GitHub, s√• m√• vi autentifisere oss. M√•ten vi gj√∏re det p√• er ved √• generere et Personal Access Token (ofte forkortet PAT) som vi oppgir n√•r vi vil hente eller oppdatere kode p√• GitHub. Da sender vi med PAT for √• autentifisere oss for GitHub.\n\n15.4.1 Opprette PAT\nFor √• lage en PAT som er godkjent mot statisticsnorway s√• gj√∏r man f√∏lgende:\n\nG√• til din profilside p√• GitHub og √•pne Settings slik som ble vist Section¬†15.2.\nVelg Developer Settings i menyen til venstre.\nI menyen til venstre velger du Personal Access Token, og deretter Tokens (classic).\nUnder Note kan du gi PAT`en et navn. Velg et navn som er intuitivt for deg. Hvis du skal bruke PAT til √• jobbe mot Dapla, s√• ville jeg ganske enkelt kalt den dapla. Hvis du skal bruke den mot bakkemilj√∏et ville jeg kalt den prodsone eller noe annet som gj√∏r det lett for det skj√∏nne innholdet i ettertid.\nUnder Expiration velger du hvor lang tid som skal g√• f√∏r PAT blir ugyldig. Dette er en avvening mellom sikkerhet og hva som er praktisk. En grei melloml√∏sning kan v√¶re √• velge 3 m√•neder. N√•r PAT g√•r ut m√• du gjenta stegene i dette kapitlet.\nUnder Select scopes velger du Repo (se bilde under).\n\n\n\nTrykk p√• Generate token nederst p√• siden og du f√•r opp noe som ser ut som dette:\n\n\n\nKopier deretter PAT til en midlertidig fil. Grunnen er at du aldri vil se det igjen her etter at vi har gjennomf√∏rt neste steg.\nDeretter trykker du p√• Configure SSO og velger Authorize ved siden statisticsnorway. Svar deretter p√• sp√∏rsm√•lene som dukker opp.\n\n\nVi har n√• opprettet en PAT som er godkjent for bruk mot SSB sin kode p√• GitHub. Det betyr at hvis vi vil jobbe med Git p√• SSB sine maskiner i sky eller p√• bakken, s√• m√• vi sendte med dette tokenet for √• f√• lov til √• jobbe med koden som ligger p√• statisticsnorway p√• GitHub.\n\n\n15.4.2 Lagre PAT\nDet er ganske upraktisk √• m√•tte sende med tokenet hver gang vi skal jobbe med GitHub. Vi b√∏r derfor lagre det lokalt der vi jobber, slik at Git automatisk finner det. Det finnes mange m√•ter √• gj√∏re dette p√• og det er ikke bestemt hva som skal v√¶re beste-praksis i SSB. Men en m√•te √• gj√∏re det er via en .netrc-fil. Vi oppretter da en fil som heter .netrc p√• v√•rt hjemmeomr√•de, og legger f√∏lgende informasjon p√• en (hvilken som helst) linje i filen:\nmachine github.com login <github-bruker> password <Personal Access Token>\nGitHub-bruker er da din personlige bruker og IKKE brukernavnet ditt i SSB. Personal Access Token er det vi lagde\nEn veldig enkel m√•te √• lagre dette er som f√∏lger. Anta at min personlige GitHub-bruker er SSB-Chad og at min Personal Access Token er blablabla. Da kan jeg gj√∏re f√∏lgende for √• lagre det i .netrc:\n\nG√• inn i Jupyterlab og √•pne en Python-notebook.\nI den f√∏rste kodecellen skriver du:\n!echo \"machine github.com login SSB-Chad password blablabla\" >> ~/.netrc\n\nAlternativt kan du droppe det utropstegnet og kj√∏re det direkte i en terminal. Det vil gi samme resultat. Koden over legger til en linje med teksten machine github.com login SSB-Chad password blablabla i en .netrc-fil p√• din hjemmeomr√•det, uanvhengig av om du har en fra f√∏r eller ikke. Hvis du har en fil fra f√∏r som allerede har et token fra GitHub, ville jeg nok slettet det f√∏r jeg legger en et nytt token.\nHver gang du jobber mot GitHub vil Git sjekke om informasjon om autentifisering ligger i denne filen, og bruke den hvis den ligger der.\n\n\n15.4.3 Oppdater PAT\nI eksempelet over lagde vi en PAT som var gyldig i 90 dager. Dermed vil du ikke kunne jobbe mot GitHub med dette tokenet etter 90 dager. For √• oppdatere tokenet gj√∏r du f√∏lgende:\n\nLag et nytt PAT ved √• repetere Section¬†15.4.1.\nI milj√∏et der du skal jobbe med Git og GitHub g√•r du inn i din .netrc og bytter ut token med det nye.\n\nOg med det er du klar til √• jobbe mot staisticsnorway p√• GitHub."
  },
  {
    "objectID": "ssb-project.html#opprett-ssb-project",
    "href": "ssb-project.html#opprett-ssb-project",
    "title": "15¬† SSB-project",
    "section": "15.5 Opprett ssb-project",
    "text": "15.5 Opprett ssb-project\nProgrammet ssb-project skal gj√∏re det enklere √• organiserer kode etter god praksis i en statistikkproduksjoner. Som nevnt i innledningen vil progammet gi deg en mappestruktur, virtuelt milj√∏ og en jupyter-kernel. Hvis du √∏nsker kan det ogs√• opprette et GitHub-repo. √ònsker du alt gj√∏r du f√∏lgende:\n\n√Öpne en terminal. De fleste vil gj√∏re dette i Jupyterlab p√• bakke eller sky og da kan de bare trykke p√• det bl√• +-tegnet i Jupyterlab og velge Terminal.\nF√∏r vi kj√∏rer programmet m√• vi v√¶re obs p√• at ssb-project vil opprette en ny mappe der vi st√•r. G√• derfor til den mappen du √∏nsker √• ha den nye prosjektmappen. For √• opprette et prosjekt som heter stat-testprod Deretter skriver du f√∏lgende i terminalen:\n\nssb-project create stat-testprod\n\n\nHvis du stod i hjemmemappen din p√• n√•r du skrev inn kommandoen over i terminalen, s√• har du f√•tt mappestrukturen som vises i bildet til h√∏yre. 3. Den inneholder f√∏lgende :\n\n.git-mappe som blir opprettet for √• versjonsh√•ndtere med Git.\nsrc-mappe som skal inneholde all koden som utgj√∏r produksjonsl√∏pet.\ntests-mappe som inneholder tester du skriver for koden din.\nLICENCE-fil som skal benyttes for public-repos i SSB.\npoetry.lock-fil som inneholder alle versjoner av Python-pakker som blir brukt.\nREADME.md-fil som brukes for tekstlig innhold p√• GitHub-siden for prosjektet.\n\n\n\n\n\n\nOver s√• opprettet vi et ssb-project uten √• opprette et GitHub-repo med samme navn. Hvis du √∏nsker √• opprette et GitHub-repo ogs√• m√• du endre kommandoen over til:\nssb-project create stat-testprod --github github-token='blablabla'\nKommandoen over oppretter en mappestruktur slik vi s√• tidligere, men ogs√• et ssb-project som heter stat-testprod med et GitHub-repo med samme navn. Repoet i GitHub ser da slik ut:"
  },
  {
    "objectID": "git-github.html",
    "href": "git-github.html",
    "title": "16¬† Git og Github",
    "section": "",
    "text": "I SSB anbefales det man versjonh√•ndterer koden sin med Git og deler koden via GitHub. For √• l√¶re seg √• bruke disse verkt√∏yene p√• en god m√•te er det derfor viktig √• forst√• forskjellen mellom Git og Github. Helt overordnet er forskjellen f√∏lgende:\nAv definisjonene over s√• skj√∏nner vi at det er Git som gir oss all funksjonalitet for √• lagre versjoner av koden v√•r. GitHub er mer som et valg av mappesystem. Men m√•ten kodemilj√∏ene v√•re er satt opp p√• Dapla s√• har vi ingen fellesmappe som alle kan kj√∏re koden fra. Man utvikler kode i sin egen hjemmemappe, som bare du har tilgang til, og n√•r du skal samarbeide med andre, s√• m√• du sende koden til GitHub. De du samarbeider med m√• deretter hente ned denne koden f√∏r de kan kj√∏re den.\nI dette kapitlet ser vi n√¶rmere p√• Git og Github og hvordan de er implementert i SSB. Selv om SSB har laget programmet ssb-project for √• gj√∏re det lettere √• bl.a. forholde seg til Git og GitHub, s√• vil vi dette kapitlet forklare n√¶rmere hvordan det funker uten dette hjelpemiddelet. Forh√•pentligvis vil det gj√∏re det lettere √• h√•ndtere mer kompliserte situasjoner som oppst√•r i arbeidshverdagen som statistikker."
  },
  {
    "objectID": "git-github.html#git",
    "href": "git-github.html#git",
    "title": "16¬† Git og Github",
    "section": "16.1 Git",
    "text": "16.1 Git\nGit er terminalprogram som installert p√• maskinen du jobber. Hvis man ikke liker √• bruke terminalen finnes det mange pek-og-klikk versjoner av Git, blant annet i Jupyterlab, SAS EG og RStudio. Men typisk vil det en eller annen gang oppst√• situasjoner der det ikke finnes l√∏sninger i pek-og-klikk versjonen, og man m√• ordne opp i terminalen. Av den grunn velger vi her √• fokusere p√• hvordan Git fungerer fra terminalen. Vi vil ogs√• fokusere p√• hvordan Git fungerer fra terminalen i Jupyterlab p√• Dapla.\n\n16.1.1 Hva er Git?\nKommer snart. Kort forklaring med lenke til mer utfyllende svar.\n\n\n16.1.2 Oppsett av Git\nKommer snart. Scriptet til Kvakk.\n\n\n16.1.3 Git og Notebooks\nKommer snart. Jupytext og nbsripout. json.\n\n\n16.1.4 Vanlige Git-operasjoner\nKommer snart. clone, add, commit, push, pull, merge, revert, etc."
  },
  {
    "objectID": "git-github.html#github",
    "href": "git-github.html#github",
    "title": "16¬† Git og Github",
    "section": "16.2 GitHub",
    "text": "16.2 GitHub"
  },
  {
    "objectID": "virtual-env.html",
    "href": "virtual-env.html",
    "title": "17¬† Virtuelle milj√∏er",
    "section": "",
    "text": "Et python viretuelt milj√∏ inneholder en spesifikk versjon av python og et sett med pakker. Pakkene er kun tilgjengelige n√•r det viretuelt milj√∏et er aktivert. Dette gj√∏r at man ung√•r avhengighetskonflikter p√• tvers av prosjekter.\nSe her for mer informasjon om viretuelle milj√∏er.\n\n\nDet er anbefalt √• benytte verkt√∏yet poetry for √• administrere prosjekter og deres viretuelle milj√∏.\nPoetry setter opp virtuelt milj√∏, gj√∏r det enkelt √• oppdatere avhengigheter, sette versjons begrensninger og reprodusere prosjektet.\nPoetry gj√∏r dette ved √• lagre avhengigheters eksakte versjon i prosjektets ‚Äúpoetry.lock‚Äù. Og eventuelle begrensninger i ‚Äúpyproject.toml‚Äù. Dette gj√∏r det enkelt for andre √• bygge prosjektet med akkurat de samme pakkene og begrensningene."
  },
  {
    "objectID": "virtual-env.html#r",
    "href": "virtual-env.html#r",
    "title": "17¬† Virtuelle milj√∏er",
    "section": "17.2 R",
    "text": "17.2 R"
  },
  {
    "objectID": "pakke-install.html",
    "href": "pakke-install.html",
    "title": "19¬† Installere pakker",
    "section": "",
    "text": "Installering av pakker er kun er mulig I et virtuelt milj√∏. Det er anbefalt √• benytte poetry til dette. Eksemplene videre tar derfor utgangspunkt i et poetry prosjekt.\nDet er mulig √• installere pakker med pip. Pakker kan installeres som normalt, hvis man har satt opp og aktivert et virtuelt milj√∏.\n\n\nDette eksemplet viser hvordan man setter oppe et enkelt poetry prosjekt kalt test, hvis man √∏nsker √• benytte et annet prosjektnavn m√• man endre dette i hver av kommandoene.\nSett opp prosjektet:\npoetry new test\nNaviger inn i prosjektmappen:\ncd test\nBruk poetry install for √• bygge prosjektet:\npoetry install\nHvis man f√•r en tilbakemelding som denne er prosjektet satt opp korrekt:\nCreating virtualenv test-EojoH6Zm-py3.10 in /home/jovyan/.cache/pypoetry/virtualenvs \nUpdating dependencies \nResolving dependencies... (0.1s) \n\nWriting lock file \n\n\n\nFor √• legge til pakker i et prosjekt benyttes kommandoen poetry add.\nSkal man legge til pakken ‚Äúpendulum‚Äù vil det se slik ut:\npoetry add pendulum\nPoetry tilbyr m√•ter √• sette versjonsbegrensninger for pakker som legges til i et prosjekt, dette kan man lese mer om her.\n\n\n\nFor √• fjerne pakker fra et prosjekt benytter man poetry remove.\nHvis man √∏nsker √• fjerne ‚Äúpendulum‚Äù fra et prosjekt vil kommandoen se slik ut:\npoetry remove pendulum\n\n\n\nFor √• oppdatere pakker i et prosjekt benytter man kommandoen poetry update.\nSkal man oppdatere pakken ‚Äúpendulum‚Äù bruker man:\npoetry update pendulum\nSkal man oppdatre alle pakken i et prosjekt benytter man:\npoetry update \n\n\n\nFor √• kunne benytte det virtuelle milj√∏et i en notebook m√• man sette opp en kernel. Kernel burde gis samme navn som prosjektet.\nF√∏rst legger man til ipykernel:\npoetry add ipykernel\nS√• opprettes kernel med:\npoetry run python -m ipykernel install --user --name test\nEtter dette er kernelen test opprettet og kan velges for √• benytte milj√∏et i en notebook.\n\n\n\nFor √• fjerne en kernel med navn test bruker man:\njupyter kernelspec remove test\nDu vil bli spurt om √• bekrefte, trykk y hvis man √∏nsker √• slette:\nKernel specs to remove:\n  test                    /home/jovyan/.local/share/jupyter/kernels/test\nRemove 1 kernel specs [y/N]: y\nEtter dette er kernelen fjernet.\n\n\n\nHvem som helst kan legge til pakker p√• PyPi, det betyr at de i verstefall, kan inneholde skadelig kode. Her er en list med viktige tiltak som minimere risikoen:\n\nF√∏r man installerer pakker b√∏r man alltid s√∏ke de opp p√• https://pypi.org. Det er anbefalt √• klippe og lime inn pakkenavnet n√•r man skal legge det til i et prosjekt.\nEr det et popul√¶rt/velkjent prosjekt? Hvor mange stjerner og forks har repoet?"
  },
  {
    "objectID": "pakke-install.html#r",
    "href": "pakke-install.html#r",
    "title": "19¬† Installere pakker",
    "section": "19.2 R",
    "text": "19.2 R\nInstallering av pakker for R-milj√∏et i Jupyterlab er forel√∏pig ikke en del av ssb-project. Men vi kan bruke renv. Mer kommer.\n\n19.2.1 Installering\nFor √• installere dine egne R-pakker m√• du opprette et virtuelt milj√∏ med renv. G√• inn i Jupyterlab og √•pne R-notebook. Deretter skriver du inn f√∏lgende i kodecelle:\nrenv::init()\nDenne kommandoer aktiverer et virtuelt milj√∏ i mappen du st√•r i. Rent praktisk vil det si at du fikk f√∏lgende filer/mapper i mappen din:\nrenv.lock\nEn fil som inneholder versjoner av alle pakker du benytter i koden din.\nrenv\nMappe som inneholder alle pakkene du installerer.\nN√• som vi har et virtuelle milj√∏et p√• plass kan vi installere en R-pakke. Du kan gj√∏re dette fra b√•de terminalen og fra en Notebook. Vi anbefaler p√• gj√∏re det fra terminalen fordi du da f√•r tilbakemelding p√• om installeringen gikk bra heller ikke. For √• installere i terminalen gj√∏r du f√∏lgende:\n\n√Öpne en terminal i Jupyterlab\nSt√• i mappen der du aktiverte det virtuelle milj√∏et\nSkriv in R og trykk enter.\n\nDet vi n√• har gjort er √• √•pne R fra terminalen slik at vi kan skrive R-kode direkte i terminalen. Det omtales ofte som en R Console. N√• kan du skrive inn en vanlig kommando for √• installere R-pakker:\ninstall.packages(\"PxWebApiData\")\nOver installerte vi pakken PxWebApiData som er en pakke skrevet i SSB for √• hente ut data fra v√•r statistikkbank. La oss bruke pakken i koden v√•r med ved √• skrive f√∏lgende i kodecelle i Notebooken v√•r:\nlibrary(PxWebApiData)\nApiData(\"https://data.ssb.no/api/v0/en/table/04861\", \n        Region = c(\"1103\", \"0301\"), ContentsCode = \"Bosatte\", Tid = c(1, 2, -2, -1))\nN√•r vi n√• har brukt PxWebApiData i koden v√•r s√• kan vi kj√∏re en kommando som legger til den pakken i renv.lock. Men f√∏r vi kan gj√∏re det m√• vi v√¶re obs p√• at renv ikke klarer √• gjenkjenne pakker som er i bruk Notebooks (ipynb-filer). Det er veldig upraktisk, men noe vi m√• forholde oss til n√•r vi jobber med renv i Jupyterlab. En mulig l√∏sning for dette er √• bruke Jupytext til √• synkronisere en ipynb-fil med en Rmd-fil. renv kjenner igjen b√•de R- og Rmd-filer. For √• synkronisere filene gj√∏r du f√∏lgende:\n\nTrykk Ctrl+Shift C\nSkriv inn Pair i s√∏kefeltet som dukker opp\nVelg Pair Notebook with R Markdown\n\nHvis du n√• endrer en av filene s√• vil den andre oppdatere seg, og renv vil kunne oppdage om du bruker en pakke i koden din. Men for √• trigge renv til √• lete etter pakker som er i bruk s√• m√• du skrive f√∏lgende kode i Notebooken eller R Console:\nrenv::snapshot()\nKikker du n√• inne i renv.lock-filen s√• ser du n√• at verjsonen av PxWebApiData er lagt til. I bildet under ser du hvordan et arbeidsmilj√∏ typisk kan se ut n√•r man installerer sine egne pakker.\n\n\n\n19.2.2 Avinstallering\n\n\n19.2.3 Oppgradere pakker"
  },
  {
    "objectID": "samarbeid.html",
    "href": "samarbeid.html",
    "title": "20¬† Samarbeid",
    "section": "",
    "text": "Noen har opprettet et ssb-project og pushet til Github. Hvordan skal kollegaer g√• frem for √• bidra inn i koden?"
  },
  {
    "objectID": "pakke-install-bakken.html",
    "href": "pakke-install-bakken.html",
    "title": "22¬† Installere pakker",
    "section": "",
    "text": "Installering av pakker i Jupyter milj√∏er p√• bakken (f.eks https://sl-jupyter-p.ssb.no) foreg√•r stort sett helt lik som p√• Dapla. Det er √©n viktig forskjell, og det er at installasjon skjer via en proxy som heter Nexus.\n\n\nPip er ferdig konfigurert for bruk av Nexus og kan kj√∏res som beskrevet for Dapla\n\n\n\nHvis man bruker Poetry for h√•ndtering av pakker i et prosjekt, s√• m√• man kj√∏re f√∏lgende kommando i prosjekt-mappe etter prosjektet er opprettet.\npoetry source add --default nexus `echo $PIP_INDEX_URL`\nDa f√•r man installere pakker som vanlig f.eks\npoetry add matplotlib\n\n\n\n\n\n\nHvis man fors√∏ker √• installere prosjektet i et annet milj√∏ (f.eks Dapla), s√• m√• man fjerner nexus kilden ved √• kj√∏re\npoetry source remove nexus"
  },
  {
    "objectID": "pakke-install-bakken.html#r",
    "href": "pakke-install-bakken.html#r",
    "title": "22¬† Installere pakker",
    "section": "22.2 R",
    "text": "22.2 R\nProsessen med √• installere pakker for R p√• bakken er veldig lik slik det gj√∏res p√• Dapla. Under beskriver hvordan det avviker fra prosedyren p√• Dapla.\n\n22.2.1 Installering\nVi installerer fra en proxy-server p√• bakken, og derfor m√• vi spesifisere denne adressen manuelt f√∏r vi kan installere R-pakker.\nrepos <- c(CRAN = \"https://nexus.ssb.no/repository/CRAN/\")\noptions(repos = repos)\nDeretter kan du initiere det virtuelle milj√∏et med f√∏lgende kommando:\nrenv::init()\nResten er likt som det som er forklart for Dapla.\n\n\n22.2.2 Avinstallering\n\n\n22.2.3 Oppgradere pakker"
  },
  {
    "objectID": "lese-data-bakken.html",
    "href": "lese-data-bakken.html",
    "title": "23¬† Lese inn filer",
    "section": "",
    "text": "Mer kommer."
  },
  {
    "objectID": "lese-data-bakken.html#sas7bdat",
    "href": "lese-data-bakken.html#sas7bdat",
    "title": "23¬† Lese inn filer",
    "section": "23.1 sas7bdat",
    "text": "23.1 sas7bdat"
  },
  {
    "objectID": "lese-data-bakken.html#oracle",
    "href": "lese-data-bakken.html#oracle",
    "title": "23¬† Lese inn filer",
    "section": "23.2 Oracle",
    "text": "23.2 Oracle"
  },
  {
    "objectID": "lese-data-bakken.html#fame",
    "href": "lese-data-bakken.html#fame",
    "title": "23¬† Lese inn filer",
    "section": "23.3 Fame",
    "text": "23.3 Fame"
  },
  {
    "objectID": "lese-data-bakken.html#tekstfiler",
    "href": "lese-data-bakken.html#tekstfiler",
    "title": "23¬† Lese inn filer",
    "section": "23.4 Tekstfiler",
    "text": "23.4 Tekstfiler"
  },
  {
    "objectID": "lese-data-bakken.html#parquet",
    "href": "lese-data-bakken.html#parquet",
    "title": "23¬† Lese inn filer",
    "section": "23.5 Parquet",
    "text": "23.5 Parquet"
  },
  {
    "objectID": "lese-data.html",
    "href": "lese-data.html",
    "title": "24¬† Lese filer fra b√∏tte",
    "section": "",
    "text": "Skal man lese fra en b√∏tte m√• man autentisere seg. For √• gj√∏re dette kan man benytte pakken dapla-toolbelt."
  },
  {
    "objectID": "lese-data.html#eksempler",
    "href": "lese-data.html#eksempler",
    "title": "24¬† Lese filer fra b√∏tte",
    "section": "24.1 Eksempler",
    "text": "24.1 Eksempler\n\n\n\n\n\n\n‚Äúnavn-boette‚Äù eksisterer ikke og m√• byttes med en reel b√∏tte.\n\n\n\nLes json fil fra b√∏tte:\nimport dapla as dp\n\ndata_frame = dp.read_pandas(\"gs://ssb-staging-navn-boette/schema.json\",\n file_format=\"json\")\nList ut mapper i b√∏tta:\nfrom dapla import FileClient\n\nFileClient.ls(\"gs://ssb-staging-navn-boette/\")"
  },
  {
    "objectID": "lese-data.html#vanlige-problemer",
    "href": "lese-data.html#vanlige-problemer",
    "title": "24¬† Lese filer fra b√∏tte",
    "section": "24.2 Vanlige problemer",
    "text": "24.2 Vanlige problemer\n\n24.2.1 Feil milj√∏\nEn vanlig √•rsak til feil er at man fors√∏ker √• lese data fra et annet milj√∏ enn det man befinner seg i. Sjekk at url feltet i nettleseren stemmer overens med b√∏ttene man fors√∏ker √• aksessere.\nStagingb√∏tter starter med: gs://ssb-staging-\nProduksjonsb√∏tter starter med: gs://ssb-prod-\n\n\n\n\n\n\nI https://jupyter.dapla-staging.ssb.no/ kan man ikke lese produksjonsb√∏tter.\n\n\n\n\n\n\n\n\n\nI https://jupyter.dapla.ssb.no/ kan man ikke lese stagingb√∏tter.\n\n\n\n\n\n24.2.2 Omstart av Jupyter\nNoen ganger kan en restart av Jupyter l√∏se problemet.\nI Jupyters filmeny velg: fil -> Hub Controll Panel.\nTrykk p√• knappen ‚ÄúStop My Server‚Äù. Etter dette kan man trykke knappen ‚ÄúStart My Server‚Äù.\n\n\n\nStop My Server\n\n\n\n\n24.2.3 Opprett TMS sak\nHvis man fortsatt ikke har tilgang, kan man opprette en TMS sak. For at vi lettes mulig skal kunne hjelpe b√∏r saken inneholde full feilmelding & relevant kode."
  },
  {
    "objectID": "remote.html",
    "href": "remote.html",
    "title": "25¬† IDE‚Äôer",
    "section": "",
    "text": "Forklare situasjonen n√•. Kun Jupyterlab. Kan kj√∏re remote session med Rstudio, Pycharm og VSCode."
  },
  {
    "objectID": "remote.html#rstudio",
    "href": "remote.html#rstudio",
    "title": "25¬† IDE‚Äôer",
    "section": "25.1 RStudio",
    "text": "25.1 RStudio"
  },
  {
    "objectID": "remote.html#vscode",
    "href": "remote.html#vscode",
    "title": "25¬† IDE‚Äôer",
    "section": "25.2 VSCode",
    "text": "25.2 VSCode"
  },
  {
    "objectID": "remote.html#pycharm",
    "href": "remote.html#pycharm",
    "title": "25¬† IDE‚Äôer",
    "section": "25.3 Pycharm",
    "text": "25.3 Pycharm"
  },
  {
    "objectID": "databaser.html#cloudsql",
    "href": "databaser.html#cloudsql",
    "title": "27¬† Databaser",
    "section": "27.2 CloudSQL",
    "text": "27.2 CloudSQL"
  }
]